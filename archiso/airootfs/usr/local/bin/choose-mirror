#!/bin/bash
#
# SPDX-License-Identifier: GPL-3.0-or-later
#
# Updates the mirror lists for Arch and Chaotic-AUR using rate-mirrors.

# Make sure the script is running with root privileges
if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root" 
   exit 1
fi

echo "-> Updating mirror list for Arch Linux repositories..."
# Arch
rate-mirrors --allow-root --protocol https arch --fetch-mirrors-timeout=300000 | grep -v '^#' | tee /etc/pacman.d/mirrorlist

echo ""
echo "-> Updating mirror list for Chaotic-AUR..."
# Chaotic-AUR
rate-mirrors --allow-root --protocol https chaotic-aur --fetch-mirrors-timeout=300000 | grep -v '^#' | tee /etc/pacman.d/chaotic-mirrorlist

echo ""
echo "âœ… Mirror lists updated successfully."